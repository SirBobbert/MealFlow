SET FOREIGN_KEY_CHECKS = 0;

TRUNCATE TABLE recipe_ingredient;
TRUNCATE TABLE recipe;
TRUNCATE TABLE ingredient;
TRUNCATE TABLE `user`;

SET FOREIGN_KEY_CHECKS = 1;

-- USER (password is BCrypt hash for "password123")
INSERT INTO `user` (
    name,
    email,
    password,
    created_at,
    role
) VALUES (
    'Test User',
    'test@email.com',
    '$2b$10$1NXcAOE6TBWNNMzxXF5tuOdpscLuq2dAIQ4XEVB4zHg3bYzhXMMWa',
    NOW(),
    'USER'
);

-- INGREDIENT
INSERT INTO ingredient (name, category) VALUES
('Carrot',           'VEGETABLE'),
('Onion',            'VEGETABLE'),
('Garlic',           'VEGETABLE'),
('Olive oil',        'OTHER'),
('Spaghetti',        'GRAIN'),
('Minced beef',      'PROTEIN'),
('Tomato passata',   'VEGETABLE'),
('Salt',             'SPICE'),
('Black pepper',     'SPICE'),
('Chicken breast',   'PROTEIN'),
('Rice',             'GRAIN'),
('Butter',           'DAIRY');

-- RECIPES
INSERT INTO recipe (
    user_id,
    title,
    description,
    instructions,
    servings,
    prep_time,
    created_at,
    updated_at
) VALUES
(
  (SELECT id FROM `user` WHERE email = 'test@email.com'),
  'Spaghetti Bolognese',
  'Classic spaghetti with a rich meat and tomato sauce.',
  '1) Heat oil, fry onion and garlic. '
  '2) Brown minced beef. '
  '3) Add tomato passata, carrots, salt and pepper and simmer 20-30 minutes. '
  '4) Cook spaghetti according to package. '
  '5) Toss spaghetti with sauce and serve.',
  4,
  30,
  '2025-01-01 12:00:00',
  '2025-01-01 12:00:00'
),
(
  (SELECT id FROM `user` WHERE email = 'test@email.com'),
  'Simple Chicken Rice Bowl',
  'Easy chicken with buttered rice and veggies.',
  '1) Cook rice according to package. '
  '2) Season chicken with salt and pepper, then fry until cooked through. '
  '3) Toss hot rice with butter. '
  '4) Serve chicken over rice with any extra veggies you like.',
  2,
  25,
  '2025-01-02 12:00:00',
  '2025-01-02 12:00:00'
);

-- RECIPE_INGREDIENT

-- Spaghetti Bolognese
INSERT INTO recipe_ingredient (
    recipe_id,
    ingredient_id,
    amount,
    unit
) VALUES
(
  (SELECT r.id FROM recipe r WHERE r.title = 'Spaghetti Bolognese'),
  (SELECT i.id FROM ingredient i WHERE i.name = 'Spaghetti'),
  400,
  'g'
),
(
  (SELECT r.id FROM recipe r WHERE r.title = 'Spaghetti Bolognese'),
  (SELECT i.id FROM ingredient i WHERE i.name = 'Minced beef'),
  400,
  'g'
),
(
  (SELECT r.id FROM recipe r WHERE r.title = 'Spaghetti Bolognese'),
  (SELECT i.id FROM ingredient i WHERE i.name = 'Onion'),
  1,
  'pc'
),
(
  (SELECT r.id FROM recipe r WHERE r.title = 'Spaghetti Bolognese'),
  (SELECT i.id FROM ingredient i WHERE i.name = 'Garlic'),
  2,
  'cloves'
),
(
  (SELECT r.id FROM recipe r WHERE r.title = 'Spaghetti Bolognese'),
  (SELECT i.id FROM ingredient i WHERE i.name = 'Carrot'),
  1,
  'pc'
),
(
  (SELECT r.id FROM recipe r WHERE r.title = 'Spaghetti Bolognese'),
  (SELECT i.id FROM ingredient i WHERE i.name = 'Tomato passata'),
  500,
  'ml'
),
(
  (SELECT r.id FROM recipe r WHERE r.title = 'Spaghetti Bolognese'),
  (SELECT i.id FROM ingredient i WHERE i.name = 'Olive oil'),
  2,
  'tbsp'
),
(
  (SELECT r.id FROM recipe r WHERE r.title = 'Spaghetti Bolognese'),
  (SELECT i.id FROM ingredient i WHERE i.name = 'Salt'),
  1,
  'tsp'
),
(
  (SELECT r.id FROM recipe r WHERE r.title = 'Spaghetti Bolognese'),
  (SELECT i.id FROM ingredient i WHERE i.name = 'Black pepper'),
  0,
  'to_taste'
);

-- Simple Chicken Rice Bowl
INSERT INTO recipe_ingredient (
    recipe_id,
    ingredient_id,
    amount,
    unit
) VALUES
(
  (SELECT r.id FROM recipe r WHERE r.title = 'Simple Chicken Rice Bowl'),
  (SELECT i.id FROM ingredient i WHERE i.name = 'Rice'),
  200,
  'g'
),
(
  (SELECT r.id FROM recipe r WHERE r.title = 'Simple Chicken Rice Bowl'),
  (SELECT i.id FROM ingredient i WHERE i.name = 'Chicken breast'),
  300,
  'g'
),
(
  (SELECT r.id FROM recipe r WHERE r.title = 'Simple Chicken Rice Bowl'),
  (SELECT i.id FROM ingredient i WHERE i.name = 'Butter'),
  20,
  'g'
),
(
  (SELECT r.id FROM recipe r WHERE r.title = 'Simple Chicken Rice Bowl'),
  (SELECT i.id FROM ingredient i WHERE i.name = 'Salt'),
  1,
  'tsp'
),
(
  (SELECT r.id FROM recipe r WHERE r.title = 'Simple Chicken Rice Bowl'),
  (SELECT i.id FROM ingredient i WHERE i.name = 'Black pepper'),
  0,
  'to_taste'
);
